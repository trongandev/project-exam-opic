import{u as N,a3 as w,a4 as y,a5 as m,j as e,B as c,a6 as k,a7 as d,a8 as h,a9 as b,k as L,aa as S}from"./index-V92FSDVv.js";import{u as B,h as C,b as x,L as u}from"./react-CZ6hAaVq.js";function F(){const t=B(),p=C(),g=new URLSearchParams(p.search).get("redirect")||"/",{login:f}=N(),[n,i]=x.useState(!1),[o,j]=x.useState(""),s=w({initialValues:{email:"",password:""},validationSchema:y({email:m().email("Email không hợp lệ").required("Vui lòng nhập email"),password:m().required("Vui lòng nhập password")}),onSubmit:l=>{v(l)}}),v=async l=>{try{i(!0);const a=await S.login(l);f(a.user,a.accessToken,a.refreshToken),t(g,{replace:!0})}catch(a){let r="Email hoặc mật khẩu không đúng";a.response?.data?.message?r=a.response.data.message:a.message&&(r=a.message),j(r)}finally{i(!1)}};return e.jsx("div",{className:"h-screen flex items-center justify-center  px-5 xl:px-0",children:e.jsxs("div",{className:"w-full xl:max-w-4xl  mx-auto shadow-md rounded-xl border border-gray-200 flex flex-col-reverse xl:flex-row overflow-hidden items-center relative",children:[e.jsx("div",{className:"absolute left-5 top-5",children:e.jsx(c,{variant:"outline",onClick:()=>t(-1),children:e.jsx(k,{})})}),e.jsxs("div",{className:"p-5 flex-1 w-full",children:[e.jsx("h1",{className:"text-3xl font-medium text-primary mb-5 text-center",children:"Đăng nhập"}),e.jsxs("form",{className:"space-y-5",onSubmit:s.handleSubmit,children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(d,{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx(h,{type:"email",id:"email",placeholder:"Nhập email",className:"h-10 md:h-12",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.email}),s.touched.email&&s.errors.email?e.jsx("div",{className:"text-red-500 mt-1 mb-3 ml-5 text-sm",children:s.errors.email}):null]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx(d,{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Mật khẩu"}),e.jsx(h,{type:"password",id:"password",placeholder:"Nhập mật khẩu",className:"h-10 md:h-12",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.password}),s.touched.password&&s.errors.password?e.jsx("div",{className:"text-red-500 mt-1 ml-5 text-sm font-medium",children:s.errors.password}):null]}),o&&e.jsxs("div",{className:"text-sm flex  items-center",children:[e.jsx(b,{className:"text-red-700",size:16}),e.jsx("span",{className:"text-red-500 ml-2",children:o})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs(c,{type:"submit",disabled:n,children:[n&&e.jsx(L,{}),"Đăng nhập"]}),e.jsx(u,{to:`/auth/forgot-password?email=${s.values.email}`,className:"text-xs text-gray-500 hover:underline pr-5",children:"Quên mật khẩu?"})]})]}),e.jsxs("div",{className:"flex gap-2 text-xs text-gray-500 mt-3",children:[e.jsx("p",{children:"Bạn chưa có tài khoản?"}),e.jsx(u,{to:"/auth/register",className:"text-primary underline ",children:"Đăng ký ngay"})]})]}),e.jsx("div",{className:"flex-1  p-5",children:e.jsx("img",{src:"/svg/global-team.svg",alt:"",className:"w-full h-full "})})]})})}export{F as default};
